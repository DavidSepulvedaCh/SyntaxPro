---
// Navbar Component
import "../styles/Navbar.scss";
import imagesConfig from "../data/images.json";
import { routes } from "../utils/routes";
---

<nav class="navbar">
  <div class="container">
    <div class="nav-content">
      <a href={routes.home()} class="logo">
        <img src={imagesConfig.logo} alt="SyntaxPro Logo" class="logo-img" />
      </a>

      <button class="mobile-toggle" aria-label="Toggle menu" id="mobile-toggle">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <ul class="nav-links" id="nav-links">
        <li><a href="#inicio" class="nav-link">Inicio</a></li>
        <li class="dropdown">
          <a href="#servicios" class="nav-link dropdown-toggle">
            Servicios
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="dropdown-icon"
            >
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </a>
          <ul class="dropdown-menu">
            <li>
              <a href="#capacitacion" class="dropdown-item"
                >Capacitación Especializada</a
              >
            </li>
            <li>
              <a href="#recursos" class="dropdown-item"
                >Recursos (Materiales digitales)</a
              >
            </li>
          </ul>
        </li>
        <li><a href="#sobre-mi" class="nav-link">Sobre Mí</a></li>
        <li><a href="#metodologia" class="nav-link">Metodología</a></li>
        <li><a href="#contacto" class="nav-link">Contacto</a></li>
        <li>
          <a href={routes.login()} class="nav-link login-button">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
              <polyline points="10 17 15 12 10 7"></polyline>
              <line x1="15" y1="12" x2="3" y2="12"></line>
            </svg>
            Login
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<script>
  const mobileToggle = document.getElementById("mobile-toggle");
  const navLinks = document.getElementById("nav-links");

  mobileToggle?.addEventListener("click", () => {
    mobileToggle.classList.toggle("active");
    navLinks?.classList.toggle("active");
  });

  // Close mobile menu when clicking on a link
  const links = document.querySelectorAll(".nav-link");
  links.forEach((link) => {
    link.addEventListener("click", () => {
      mobileToggle?.classList.remove("active");
      navLinks?.classList.remove("active");
    });
  });

  // Mobile dropdown toggle
  const dropdownToggle = document.querySelector(".dropdown-toggle");
  const dropdown = document.querySelector(".dropdown");

  if (window.innerWidth <= 768) {
    dropdownToggle?.addEventListener("click", (e) => {
      e.preventDefault();
      dropdown?.classList.toggle("active");
    });
  }

  // Re-check on resize
  window.addEventListener("resize", () => {
    if (window.innerWidth > 768) {
      dropdown?.classList.remove("active");
    }
  });

  // Change navbar background on scroll
  window.addEventListener("scroll", () => {
    const navbar = document.querySelector(".navbar");
    if (window.scrollY > 50) {
      navbar?.classList.add("scrolled");
    } else {
      navbar?.classList.remove("scrolled");
    }
  });
</script>
